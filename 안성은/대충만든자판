import java.util.*;

class Solution {
    public int[] solution(String[] keymap, String[] targets) {
        int[] answer = new int[targets.length];
        int[] keyCount = new int[26];
        Arrays.fill(keyCount, 100);
        getMinKeyCount(keymap, keyCount);
        calculateTargetKeyCount(targets, answer, keyCount);
        return answer;
    }
    
    private static void calculateTargetKeyCount(String[] targets, int[] answer, int[] keyCount) {
        int cnt = 0;
        for (String target : targets) {
            int sum = 0;
            for (int i = 0; i < target.length(); i++) {
                int index = target.charAt(i) - 'A';
                if ( keyCount[index] == 100) {
                    sum = -1;
                    break;
                }
                sum += keyCount[index];
            }
            answer[cnt++] = sum;
        }
    }

    private static void getMinKeyCount(String[] keymap, int[] keyCount) {
        for (String s : keymap) {
            for (int i = 0; i < s.length(); i++) {
                int index = s.charAt(i) - 'A';
                if (i < keyCount[index]) keyCount[index] = i + 1;
            }
        }
    }
}
